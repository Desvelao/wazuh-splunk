<div ng-cloak flex layout="column" class='wz-white-background'>
  <div layout="row" class="layout-row layout-align-end wz-white-background">
    <div class='wz-margin-left-10 wz-margin-top-12'>
      <span class="wz-text-link cursor-pointer" ui-sref='manager'>Management</span>
      <span> / CDB Lists </span>
    </div>
    <div flex></div>
    <div style="margin-right:7px;" id='input1'></div>
  </div>
  <!-- Headline -->
  <div ng-show="!loading" layout="column" layout-padding>
    <span class="font-size-18">
      <i class="fa fa-fw fa-pencil-square-o" aria-hidden="true"></i> CDB Lists</span>
    <span>Review all your current rules, decoders and cdb lists</span>
  </div>
  <!-- End headline -->
  <!-- Back button and title -->
  <div layout="row" layout-align="start center">
    <!-- Back button -->
    <md-button class="md-icon-button" aria-label="Back to CDB lists" ui-sref='mg-cdb'>
      <i class="fa fa-fw fa-arrow-left" aria-hidden="true"></i>
      <md-tooltip md-direction="bottom" class="wz-tooltip">
        Back to CDB lists
      </md-tooltip>
    </md-button>
    <span class="wz-text-bold">Back to CDB lists</span>
    <!-- CDB List title -->
    <h1 class="md-headline wz-headline">{{cdbInfo.file}}</h1>
  </div>
  <!-- End back button, title and status indicator -->

  <!-- CDB List information ribbon -->
  <div layout="row">
    <md-card flex class="wz-metric-color wz-md-card">
      <md-card-content layout="row" class="wz-padding-metric">
        <div flex="50" ng-if="cdbInfo.file" class="wz-text-truncatable">File:
          <span class="wz-text-bold">{{cdbInfo.file}}</span>
        </div>
        <div flex="50" ng-if="cdbInfo.path" class="wz-text-truncatable">Path:
          <span class="wz-text-bold">{{cdbInfo.path}}</span>
        </div>
      </md-card-content>
    </md-card>
  </div>
  <!-- End CDB List information ribbon -->

  <!-- Table with CDB List info -->
  <table class="table table-striped table-condensed table-layout-fixed table-hover table-vertical-align-middle">
    <thead class="wz-text-bold">
      <th class="wz-text-left">Key</th>
      <th class="wz-text-left">Value</th>
      <th class="wz-text-left">Actions</th>
    </thead>
    <tbody>
      <tr class="wz-word-wrap" ng-repeat="(key,value) in cdbContent track by $index" ng-style="editingKey === key && {'background': '#e2f7ff'}">
        <td>{{key}}</td>
        <td>
          <input ng-if="editingKey === key" ng-disabled="loadingChange" id="input-{{key}}" type="text" class="wz-input-text"
            ng-model="editingNewValue"></input>
          <span ng-show="!editingKey || editingKey !== key">{{value}}</span>
        </td>
        <td class="action-btn-td">
          <div ng-hide="!adminMode">
            <span ng-show="!editingKey || editingKey !== key" tooltip="Edit" ng-click="setEditingKey(key, value)" class="fa fa-fw fa-pencil cursor-pointer"></span>
            <span ng-show="editingKey === key && !loadingChange" tooltip="Cancel" class="fa fa-fw fa-times cursor-pointer"
              ng-click="cancelEditingKey()"></span>
            <span ng-show="editingKey === key && editingNewValue !== '' && !loadingChange" tooltip="Apply" class="fa fa-fw fa-success cursor-pointer"
              ng-click="editKey(key, editingNewValue)"></span>
            <span ng-show="editingKey === key && loadingChange"><i class="fa fa-fw fa-spin fa-spinner"></i></span>
            <i ng-if="!removingEntry || removingEntry !== key" ng-click="showConfirmRemoveEntry($event, key); $event.stopPropagation()"
              class="fa fa-fw fa-trash cursor-pointer" tooltip="Remove this entry" tooltip-placement="left" aria-hidden="true"></i>
            <div ng-if="removingEntry === key" class="confirmEmbedBubble">
              <div layout="row">
                <span class="font-size-12 wz-padding-left-8">This entry will be
                  removed</span>
              </div>
              <div layout="row">
                <md-button class="cancelBtn" type="button" ng-click="cancelRemoveEntry()"><i aria-hidden='true' class='fa fa-fw fa-close'></i>
                  Cancel</md-button>
                <md-button class="agreeBtn" type="button" ng-click="confirmRemoveEntry(item.name)"><i aria-hidden='true'
                    class='fa fa-fw fa-check'></i> Confirm</md-button>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- End CDB List table-->
</div>