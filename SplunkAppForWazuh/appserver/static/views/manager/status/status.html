<div flex layout="column" layout-align="start stretch">
  <div layout="row">
    <div class='wz-margin-left-10 wz-margin-top-12'>
      <span class="wz-text-link cursor-pointer" ui-sref='manager'>Management</span>
      <span>/ Status </span>
    </div>
    <div flex></div>
    <select ng-show="mst.clusterEnabled" class="kuiSelect wz-border-none cursor-pointer max-height-35" id="categoryBox" ng-model="mst.nodeId" ng-change="mst.changeNode(mst.nodeId)" aria-label="Select node">
      <option ng-repeat="node in mst.nodes" value="{{node.name}}">{{node.name}}</option>
    </select>
</div>

<!-- Headline -->
<div ng-show="!load" layout="column" layout-padding>
  <span class="font-size-18">
    <i class="fa fa-fw fa-heartbeat" aria-hidden="true"></i> Status</span>
    <span class="md-subheader">Check the status of all Wazuh manager daemons</span>
  </div>
  <!-- End headline -->
  <!-- Loading ring -->
  <div class='uil-ring-css' ng-show="mst.load">
    <div></div>
  </div>

  
<div layout="row" class="wz-margin-top-10 wz-margin-right-8 wz-margin-left-8" ng-show="mst.clusterError && !mst.load">
  <div flex class="euiCallOut euiCallOut--warning">
      <div class="euiCallOutHeader">
          <svg class="euiIcon euiIcon--medium euiCallOutHeader__icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><path id="help-a" d="M13.6 12.186l-1.357-1.358c-.025-.025-.058-.034-.084-.056.53-.794.84-1.746.84-2.773a4.977 4.977 0 0 0-.84-2.772c.026-.02.059-.03.084-.056L13.6 3.813a6.96 6.96 0 0 1 0 8.373zM8 15A6.956 6.956 0 0 1 3.814 13.6l1.358-1.358c.025-.025.034-.057.055-.084C6.02 12.688 6.974 13 8 13a4.978 4.978 0 0 0 2.773-.84c.02.026.03.058.056.083l1.357 1.358A6.956 6.956 0 0 1 8 15zm-5.601-2.813a6.963 6.963 0 0 1 0-8.373l1.359 1.358c.024.025.057.035.084.056A4.97 4.97 0 0 0 3 8c0 1.027.31 1.98.842 2.773-.027.022-.06.031-.084.056l-1.36 1.358zm5.6-.187A4 4 0 1 1 8 4a4 4 0 0 1 0 8zM8 1c1.573 0 3.019.525 4.187 1.4l-1.357 1.358c-.025.025-.035.057-.056.084A4.979 4.979 0 0 0 8 3a4.979 4.979 0 0 0-2.773.842c-.021-.027-.03-.059-.055-.084L3.814 2.4A6.957 6.957 0 0 1 8 1zm0-1a8.001 8.001 0 1 0 .003 16.002A8.001 8.001 0 0 0 8 0z"></path></defs><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#help-a" fill-rule="evenodd"></use></svg>
          <span class="euiCallOutHeader__title">{{mst.clusterError}}</span>
      </div>
  </div>
</div>

  <!-- Daemons status section -->
  <div layout="row" layout-align="start stretch" ng-if="!mst.load && !mst.clusterError">
    <md-card flex class="wz-md-card" ng-repeat="(k,v) in mst.daemons">
      <md-card-content>
        <center>
          <p ng-class="mst.getDaemonStatusClass(v)" class="round"></p>
          <p class="wz-padding-top-10">{{k}}</p>
        </center>
      </md-card-content>
    </md-card>
  </div>
  <!-- End daemons status section -->
  
  <!-- Agents status section -->
  <div ng-show="!load && !mst.clusterError" layout="row" layout-align="start center" ng-if="!mst.load">
    <md-card flex class="wz-metric-color wz-md-card">
      <md-card-content layout="row" class="wz-padding-metric">
        <div flex class="wz-text-truncatable">Total agents:
          <span class="wz-text-bold">{{mst.agentsCountTotal}}</span>
        </div>
        <div flex class="wz-text-truncatable">Active:
          <span class="wz-text-bold">{{mst.agentsCountActive}}</span>
        </div>
        <div flex class="wz-text-truncatable">Disconnected:
          <span class="wz-text-bold">{{mst.agentsCountDisconnected}}</span>
        </div>
        <div flex class="wz-text-truncatable">Never connected:
          <span class="wz-text-bold">{{mst.agentsCountNeverConnected}}</span>
        </div>
        <div flex class="wz-text-truncatable">Agents coverage:
          <span ng-if="mst.agentsCoverity" class="wz-text-bold">{{(mst.agentsCoverity | number:2)}}%</span>
          <span ng-if="!mst.agentsCoverity" class="wz-text-bold">0%</span>
        </div>
      </md-card-content>
    </md-card>
  </div>
  <!-- End agents status section -->
  
  <div layout="row" layout-align="start stretch" layout-wrap ng-if="!mst.load && !mst.clusterError">
    <!-- Manager information section -->
    <md-card flex class="wz-md-card">
      <md-card-content>
        <i class="fa fa-fw fa-server" aria-hidden="true"></i>
        <span ng-if="mst.nodeId" class="wz-headline-title">{{mst.nodeId}} information</span> <span ng-if="!mst.nodeId" class="wz-headline-title">Manager information</span>
        <md-divider class="wz-margin-top-10"></md-divider>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Version</span>
          <span class="wz-text-right color-grey">{{mst.managerInfo.version ? mst.managerInfo.version : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Compilation date</span>
          <span class="wz-text-right color-grey">{{mst.managerInfo.compilation_date ? mst.managerInfo.compilation_date : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Installation path</span>
          <span class="wz-text-right color-grey">{{mst.managerInfo.path ? mst.managerInfo.path : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Installation type</span>
          <span class="wz-text-right color-grey">{{mst.managerInfo.type ? mst.managerInfo.type : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Agents limit</span>
          <span class="wz-text-right color-grey">{{mst.managerInfo.max_agents ? mst.managerInfo.max_agents : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">OpenSSL Support</span>
          <span class="wz-text-right color-grey">{{mst.managerInfo.openssl_support ? mst.managerInfo.openssl_support : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Total rules</span>
          <span class="wz-text-right color-grey">{{mst.totalRules ? mst.totalRules : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Total decoders</span>
          <span class="wz-text-right color-grey">{{mst.totalDecoders ? mst.totalDecoders : '-'}}</span>
        </div>
      </md-card-content>
    </md-card>
    <!-- End manager information section -->
    
    <!-- Last registered agent section -->
    <md-card flex class="wz-md-card" ng-show="mst.agentInfo && mst.agentInfo.id !== '000'">
      <md-card-content>
        <i class="fa fa-fw fa-tv" aria-hidden="true"></i>
        <span class="wz-headline-title">Last registered agent</span>
        <md-divider class="wz-margin-top-10"></md-divider>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Name</span>
          <span class="wz-text-right color-grey">{{mst.agentInfo.name ? mst.agentInfo.name : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">ID</span>
          <span class="wz-text-right color-grey">{{mst.agentInfo.id ? mst.agentInfo.id : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Status</span>
          <span class="wz-text-right color-grey">{{mst.agentInfo.status ? mst.agentInfo.status : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">IP Address</span>
          <span class="wz-text-right color-grey">{{mst.agentInfo.ip ? mst.agentInfo.ip : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Date add</span>
          <span class="wz-text-right color-grey">{{mst.agentInfo.dateAdd ? mst.agentInfo.dateAdd : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Version</span>
          <span class="wz-text-right color-grey">{{mst.agentInfo.version ? mst.agentInfo.version : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10" ng-if="mst.agentInfo.id !== '000'">
          <span flex="25">Last keep alive</span>
          <span class="wz-text-right color-grey">{{mst.agentInfo.lastKeepAlive ? mst.agentInfo.lastKeepAlive : '-'}}</span>
        </div>
        <div layout="row" class="wz-padding-top-10">
          <span flex="25">Operating system</span>
          <span class="wz-text-right color-grey">{{mst.agentInfo.os.name ? mst.agentInfo.os.name + mst.agentInfo.os.version : mst.agentInfo.os.uname ? mst.agentInfo.os.uname : '-'}}</span>
        </div>
      </md-card-content>
    </md-card>
    <!-- End last registered agent section -->
  </div>
</div>